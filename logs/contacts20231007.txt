2023-10-07 16:33:03.234 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-07 16:33:03.281 +08:00 [DBG] Hosting starting
2023-10-07 16:33:03.344 +08:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 94E46C593C0BE06B61505D939614C7B944816EDD)
2023-10-07 16:33:03.355 +08:00 [INF] Now listening on: https://localhost:7195
2023-10-07 16:33:03.355 +08:00 [INF] Now listening on: http://localhost:5108
2023-10-07 16:33:03.355 +08:00 [DBG] Loaded hosting startup assembly contactsapp
2023-10-07 16:33:03.355 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-07 16:33:03.356 +08:00 [INF] Hosting environment: Development
2023-10-07 16:33:03.356 +08:00 [INF] Content root path: /Users/philipwebb/Development/dotnetangular/contactsapp/
2023-10-07 16:33:03.356 +08:00 [DBG] Hosting started
2023-10-07 16:34:15.020 +08:00 [DBG] Connection id "0HMU720O80JK7" accepted.
2023-10-07 16:34:15.021 +08:00 [DBG] Connection id "0HMU720O80JK7" started.
2023-10-07 16:34:15.064 +08:00 [DBG] Connection 0HMU720O80JK7 established using the following protocol: "Tls12"
2023-10-07 16:34:15.080 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7195/api/School?pageNumber=1&pageSize=5 - -
2023-10-07 16:34:15.082 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-10-07 16:34:15.095 +08:00 [DBG] 1 candidate(s) found for the request path '/api/School'
2023-10-07 16:34:15.097 +08:00 [DBG] Endpoint 'Sustain.Controllers.SchoolController.GetSchools (contactsapp)' with route pattern 'api/School' is valid for the request path '/api/School'
2023-10-07 16:34:15.098 +08:00 [DBG] Request matched endpoint 'Sustain.Controllers.SchoolController.GetSchools (contactsapp)'
2023-10-07 16:34:15.099 +08:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2023-10-07 16:34:15.099 +08:00 [INF] CORS policy execution successful.
2023-10-07 16:34:15.115 +08:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-07 16:34:15.116 +08:00 [INF] Executing endpoint 'Sustain.Controllers.SchoolController.GetSchools (contactsapp)'
2023-10-07 16:34:15.130 +08:00 [INF] Route matched with {action = "GetSchools", controller = "School"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Sustain.Models.SchoolDto]]] GetSchools(System.String, System.String, Int32, Int32) on controller Sustain.Controllers.SchoolController (contactsapp).
2023-10-07 16:34:15.131 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-07 16:34:15.131 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-07 16:34:15.134 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-07 16:34:15.134 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-07 16:34:15.134 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-07 16:34:15.135 +08:00 [DBG] Executing controller factory for controller Sustain.Controllers.SchoolController (contactsapp)
2023-10-07 16:34:15.200 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-07 16:34:15.272 +08:00 [DBG] Executed controller factory for controller Sustain.Controllers.SchoolController (contactsapp)
2023-10-07 16:34:15.275 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-10-07 16:34:15.276 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2023-10-07 16:34:15.276 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2023-10-07 16:34:15.276 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-10-07 16:34:15.276 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-10-07 16:34:15.276 +08:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-10-07 16:34:15.277 +08:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-10-07 16:34:15.277 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-10-07 16:34:15.277 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-10-07 16:34:15.277 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-10-07 16:34:15.277 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-10-07 16:34:15.278 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-10-07 16:34:15.278 +08:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-10-07 16:34:15.278 +08:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-10-07 16:34:15.278 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2023-10-07 16:34:15.278 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name 'pageNumber' in request data ...
2023-10-07 16:34:15.278 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-10-07 16:34:15.278 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-10-07 16:34:15.278 +08:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2023-10-07 16:34:15.278 +08:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2023-10-07 16:34:15.278 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2023-10-07 16:34:15.279 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2023-10-07 16:34:15.279 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-10-07 16:34:15.279 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-10-07 16:34:15.279 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2023-10-07 16:34:15.279 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2023-10-07 16:34:15.593 +08:00 [INF] Entity Framework Core 6.0.8 initialized 'SustainContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.8' with options: None
2023-10-07 16:34:15.628 +08:00 [DBG] Compiling query expression: 
'DbSet<School>()
    .Include(s => s.Meters)
    .Include(s => s.SchoolType)
    .Count()'
2023-10-07 16:34:15.692 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM School AS s), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        Sustain.DbContexts.SustainContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-07 16:34:15.711 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-07 16:34:15.727 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (15ms).
2023-10-07 16:34:15.729 +08:00 [DBG] Opening connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:34:15.879 +08:00 [DBG] Opened connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:34:15.883 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [School] AS [s]
2023-10-07 16:34:15.907 +08:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [School] AS [s]
2023-10-07 16:34:15.915 +08:00 [DBG] A data reader was disposed.
2023-10-07 16:34:15.916 +08:00 [DBG] Closing connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:34:15.918 +08:00 [DBG] Closed connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:34:15.921 +08:00 [DBG] Compiling query expression: 
'DbSet<School>()
    .Include(s => s.Meters)
    .Include(s => s.SchoolType)
    .OrderBy(s => s.SchoolName)
    .Skip(__p_0)
    .Take(__p_1)'
2023-10-07 16:34:15.929 +08:00 [DBG] Including navigation: 'School.Meters'.
2023-10-07 16:34:15.932 +08:00 [DBG] Including navigation: 'School.SchoolType'.
2023-10-07 16:34:15.993 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<School>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: School.SchoolId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: School.SchoolLocation (string) MaxLength(100), 1], [Property: School.SchoolName (string) MaxLength(100), 2], [Property: School.SchoolTypeId (int?) FK Index, 3] }
            1 -> 0
            2 -> 4
            3 -> Dictionary<IProperty, int> { [Property: Meter.MeterId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Meter.MeterDescription (string) MaxLength(255), 6], [Property: Meter.MeterName (string) MaxLength(255), 7], [Property: Meter.MeterTypeId (int?) FK Index, 8], [Property: Meter.SchoolId (int?) FK Index, 9], [Property: Meter.UtilityAccountNumber (string), 10] }
            4 -> 5
            5 -> Dictionary<IProperty, int> { [Property: SchoolType.SchoolTypeId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 4], [Property: SchoolType.TypeLongDescription (string) MaxLength(50), 11], [Property: SchoolType.TypeShortDescription (string) Required MaxLength(255), 12] }
        SELECT t.SchoolId, t.SchoolLocation, t.SchoolName, t.SchoolTypeId, s0.SchoolTypeId, m.MeterId, m.MeterDescription, m.MeterName, m.MeterTypeId, m.SchoolId, m.UtilityAccountNumber, s0.TypeLongDescription, s0.TypeShortDescription
        FROM 
        (
            SELECT s.SchoolId, s.SchoolLocation, s.SchoolName, s.SchoolTypeId
            FROM School AS s
            ORDER BY s.SchoolName ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        LEFT JOIN SchoolType AS s0 ON t.SchoolTypeId == s0.SchoolTypeId
        LEFT JOIN Meter AS m ON t.SchoolId == m.SchoolId
        ORDER BY t.SchoolName ASC, t.SchoolId ASC, s0.SchoolTypeId ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, School>, 
    Sustain.DbContexts.SustainContext, 
    False, 
    False, 
    True
)'
2023-10-07 16:34:15.997 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-07 16:34:15.998 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-07 16:34:15.999 +08:00 [DBG] Opening connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:34:15.999 +08:00 [DBG] Opened connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:34:16.001 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[SchoolId], [t].[SchoolLocation], [t].[SchoolName], [t].[SchoolTypeId], [s0].[SchoolTypeId], [m].[MeterId], [m].[MeterDescription], [m].[MeterName], [m].[MeterTypeId], [m].[SchoolId], [m].[UtilityAccountNumber], [s0].[TypeLongDescription], [s0].[TypeShortDescription]
FROM (
    SELECT [s].[SchoolId], [s].[SchoolLocation], [s].[SchoolName], [s].[SchoolTypeId]
    FROM [School] AS [s]
    ORDER BY [s].[SchoolName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [SchoolType] AS [s0] ON [t].[SchoolTypeId] = [s0].[SchoolTypeId]
LEFT JOIN [Meter] AS [m] ON [t].[SchoolId] = [m].[SchoolId]
ORDER BY [t].[SchoolName], [t].[SchoolId], [s0].[SchoolTypeId]
2023-10-07 16:34:16.027 +08:00 [INF] Executed DbCommand (28ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[SchoolId], [t].[SchoolLocation], [t].[SchoolName], [t].[SchoolTypeId], [s0].[SchoolTypeId], [m].[MeterId], [m].[MeterDescription], [m].[MeterName], [m].[MeterTypeId], [m].[SchoolId], [m].[UtilityAccountNumber], [s0].[TypeLongDescription], [s0].[TypeShortDescription]
FROM (
    SELECT [s].[SchoolId], [s].[SchoolLocation], [s].[SchoolName], [s].[SchoolTypeId]
    FROM [School] AS [s]
    ORDER BY [s].[SchoolName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [SchoolType] AS [s0] ON [t].[SchoolTypeId] = [s0].[SchoolTypeId]
LEFT JOIN [Meter] AS [m] ON [t].[SchoolId] = [m].[SchoolId]
ORDER BY [t].[SchoolName], [t].[SchoolId], [s0].[SchoolTypeId]
2023-10-07 16:34:16.039 +08:00 [DBG] Context 'SustainContext' started tracking 'School' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 16:34:16.051 +08:00 [DBG] Context 'SustainContext' started tracking 'SchoolType' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 16:34:16.060 +08:00 [DBG] Context 'SustainContext' started tracking 'School' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 16:34:16.060 +08:00 [DBG] Context 'SustainContext' started tracking 'SchoolType' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 16:34:16.060 +08:00 [DBG] Context 'SustainContext' started tracking 'School' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 16:34:16.060 +08:00 [DBG] Context 'SustainContext' started tracking 'School' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 16:34:16.060 +08:00 [DBG] Context 'SustainContext' started tracking 'School' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 16:34:16.061 +08:00 [DBG] A data reader was disposed.
2023-10-07 16:34:16.061 +08:00 [DBG] Closing connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:34:16.061 +08:00 [DBG] Closed connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:34:16.074 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-07 16:34:16.075 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/json"]'.
2023-10-07 16:34:16.076 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'text/json' to write the response.
2023-10-07 16:34:16.076 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Sustain.Models.SchoolDto, contactsapp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-07 16:34:16.129 +08:00 [INF] Executed action Sustain.Controllers.SchoolController.GetSchools (contactsapp) in 992.3438ms
2023-10-07 16:34:16.130 +08:00 [INF] Executed endpoint 'Sustain.Controllers.SchoolController.GetSchools (contactsapp)'
2023-10-07 16:34:16.131 +08:00 [DBG] Connection id "0HMU720O80JK7" completed keep alive response.
2023-10-07 16:34:16.132 +08:00 [DBG] 'SustainContext' disposed.
2023-10-07 16:34:16.133 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7195/api/School?pageNumber=1&pageSize=5 - - - 200 1127 text/json;+charset=utf-8 1054.9687ms
2023-10-07 16:34:19.169 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7195/api/School?pageNumber=2&pageSize=5 - -
2023-10-07 16:34:19.170 +08:00 [DBG] 1 candidate(s) found for the request path '/api/School'
2023-10-07 16:34:19.171 +08:00 [DBG] Endpoint 'Sustain.Controllers.SchoolController.GetSchools (contactsapp)' with route pattern 'api/School' is valid for the request path '/api/School'
2023-10-07 16:34:19.171 +08:00 [DBG] Request matched endpoint 'Sustain.Controllers.SchoolController.GetSchools (contactsapp)'
2023-10-07 16:34:19.171 +08:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2023-10-07 16:34:19.171 +08:00 [INF] CORS policy execution successful.
2023-10-07 16:34:19.172 +08:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-07 16:34:19.172 +08:00 [INF] Executing endpoint 'Sustain.Controllers.SchoolController.GetSchools (contactsapp)'
2023-10-07 16:34:19.172 +08:00 [INF] Route matched with {action = "GetSchools", controller = "School"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Sustain.Models.SchoolDto]]] GetSchools(System.String, System.String, Int32, Int32) on controller Sustain.Controllers.SchoolController (contactsapp).
2023-10-07 16:34:19.173 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-07 16:34:19.173 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-07 16:34:19.173 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-07 16:34:19.173 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-07 16:34:19.173 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-07 16:34:19.173 +08:00 [DBG] Executing controller factory for controller Sustain.Controllers.SchoolController (contactsapp)
2023-10-07 16:34:19.174 +08:00 [DBG] Executed controller factory for controller Sustain.Controllers.SchoolController (contactsapp)
2023-10-07 16:34:19.175 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-10-07 16:34:19.175 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2023-10-07 16:34:19.175 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2023-10-07 16:34:19.175 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-10-07 16:34:19.175 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-10-07 16:34:19.175 +08:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-10-07 16:34:19.176 +08:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-10-07 16:34:19.176 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-10-07 16:34:19.176 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-10-07 16:34:19.176 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-10-07 16:34:19.176 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-10-07 16:34:19.176 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-10-07 16:34:19.176 +08:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-10-07 16:34:19.176 +08:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-10-07 16:34:19.177 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2023-10-07 16:34:19.177 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name 'pageNumber' in request data ...
2023-10-07 16:34:19.177 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-10-07 16:34:19.177 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-10-07 16:34:19.177 +08:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2023-10-07 16:34:19.177 +08:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2023-10-07 16:34:19.177 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2023-10-07 16:34:19.178 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2023-10-07 16:34:19.178 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-10-07 16:34:19.178 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-10-07 16:34:19.178 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2023-10-07 16:34:19.178 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2023-10-07 16:34:19.183 +08:00 [INF] Entity Framework Core 6.0.8 initialized 'SustainContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.8' with options: None
2023-10-07 16:34:19.187 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-07 16:34:19.188 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-07 16:34:19.188 +08:00 [DBG] Opening connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:34:19.188 +08:00 [DBG] Opened connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:34:19.188 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [School] AS [s]
2023-10-07 16:34:19.194 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [School] AS [s]
2023-10-07 16:34:19.194 +08:00 [DBG] A data reader was disposed.
2023-10-07 16:34:19.194 +08:00 [DBG] Closing connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:34:19.195 +08:00 [DBG] Closed connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:34:19.196 +08:00 [DBG] Compiling query expression: 
'DbSet<School>()
    .Include(s => s.Meters)
    .Include(s => s.SchoolType)
    .OrderBy(s => s.SchoolName)
    .Skip(__p_0)
    .Take(__p_0)'
2023-10-07 16:34:19.196 +08:00 [DBG] Including navigation: 'School.Meters'.
2023-10-07 16:34:19.197 +08:00 [DBG] Including navigation: 'School.SchoolType'.
2023-10-07 16:34:19.212 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<School>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: School.SchoolId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: School.SchoolLocation (string) MaxLength(100), 1], [Property: School.SchoolName (string) MaxLength(100), 2], [Property: School.SchoolTypeId (int?) FK Index, 3] }
            1 -> 0
            2 -> 4
            3 -> Dictionary<IProperty, int> { [Property: Meter.MeterId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: Meter.MeterDescription (string) MaxLength(255), 6], [Property: Meter.MeterName (string) MaxLength(255), 7], [Property: Meter.MeterTypeId (int?) FK Index, 8], [Property: Meter.SchoolId (int?) FK Index, 9], [Property: Meter.UtilityAccountNumber (string), 10] }
            4 -> 5
            5 -> Dictionary<IProperty, int> { [Property: SchoolType.SchoolTypeId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 4], [Property: SchoolType.TypeLongDescription (string) MaxLength(50), 11], [Property: SchoolType.TypeShortDescription (string) Required MaxLength(255), 12] }
        SELECT t.SchoolId, t.SchoolLocation, t.SchoolName, t.SchoolTypeId, s0.SchoolTypeId, m.MeterId, m.MeterDescription, m.MeterName, m.MeterTypeId, m.SchoolId, m.UtilityAccountNumber, s0.TypeLongDescription, s0.TypeShortDescription
        FROM 
        (
            SELECT s.SchoolId, s.SchoolLocation, s.SchoolName, s.SchoolTypeId
            FROM School AS s
            ORDER BY s.SchoolName ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
        ) AS t
        LEFT JOIN SchoolType AS s0 ON t.SchoolTypeId == s0.SchoolTypeId
        LEFT JOIN Meter AS m ON t.SchoolId == m.SchoolId
        ORDER BY t.SchoolName ASC, t.SchoolId ASC, s0.SchoolTypeId ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, School>, 
    Sustain.DbContexts.SustainContext, 
    False, 
    False, 
    True
)'
2023-10-07 16:34:19.213 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-07 16:34:19.213 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-07 16:34:19.213 +08:00 [DBG] Opening connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:34:19.213 +08:00 [DBG] Opened connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:34:19.214 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[SchoolId], [t].[SchoolLocation], [t].[SchoolName], [t].[SchoolTypeId], [s0].[SchoolTypeId], [m].[MeterId], [m].[MeterDescription], [m].[MeterName], [m].[MeterTypeId], [m].[SchoolId], [m].[UtilityAccountNumber], [s0].[TypeLongDescription], [s0].[TypeShortDescription]
FROM (
    SELECT [s].[SchoolId], [s].[SchoolLocation], [s].[SchoolName], [s].[SchoolTypeId]
    FROM [School] AS [s]
    ORDER BY [s].[SchoolName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [t]
LEFT JOIN [SchoolType] AS [s0] ON [t].[SchoolTypeId] = [s0].[SchoolTypeId]
LEFT JOIN [Meter] AS [m] ON [t].[SchoolId] = [m].[SchoolId]
ORDER BY [t].[SchoolName], [t].[SchoolId], [s0].[SchoolTypeId]
2023-10-07 16:34:19.225 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[SchoolId], [t].[SchoolLocation], [t].[SchoolName], [t].[SchoolTypeId], [s0].[SchoolTypeId], [m].[MeterId], [m].[MeterDescription], [m].[MeterName], [m].[MeterTypeId], [m].[SchoolId], [m].[UtilityAccountNumber], [s0].[TypeLongDescription], [s0].[TypeShortDescription]
FROM (
    SELECT [s].[SchoolId], [s].[SchoolLocation], [s].[SchoolName], [s].[SchoolTypeId]
    FROM [School] AS [s]
    ORDER BY [s].[SchoolName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [t]
LEFT JOIN [SchoolType] AS [s0] ON [t].[SchoolTypeId] = [s0].[SchoolTypeId]
LEFT JOIN [Meter] AS [m] ON [t].[SchoolId] = [m].[SchoolId]
ORDER BY [t].[SchoolName], [t].[SchoolId], [s0].[SchoolTypeId]
2023-10-07 16:34:19.226 +08:00 [DBG] Context 'SustainContext' started tracking 'School' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 16:34:19.226 +08:00 [DBG] Context 'SustainContext' started tracking 'SchoolType' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 16:34:19.226 +08:00 [DBG] Context 'SustainContext' started tracking 'School' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 16:34:19.226 +08:00 [DBG] Context 'SustainContext' started tracking 'SchoolType' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 16:34:19.226 +08:00 [DBG] Context 'SustainContext' started tracking 'School' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 16:34:19.226 +08:00 [DBG] Context 'SustainContext' started tracking 'School' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 16:34:19.229 +08:00 [DBG] Context 'SustainContext' started tracking 'School' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 16:34:19.232 +08:00 [DBG] Context 'SustainContext' started tracking 'Meter' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 16:34:19.241 +08:00 [DBG] A data reader was disposed.
2023-10-07 16:34:19.241 +08:00 [DBG] Closing connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:34:19.241 +08:00 [DBG] Closed connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:34:19.242 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-07 16:34:19.242 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/json"]'.
2023-10-07 16:34:19.242 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'text/json' to write the response.
2023-10-07 16:34:19.242 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Sustain.Models.SchoolDto, contactsapp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-07 16:34:19.246 +08:00 [INF] Executed action Sustain.Controllers.SchoolController.GetSchools (contactsapp) in 72.6008ms
2023-10-07 16:34:19.246 +08:00 [INF] Executed endpoint 'Sustain.Controllers.SchoolController.GetSchools (contactsapp)'
2023-10-07 16:34:19.246 +08:00 [DBG] Connection id "0HMU720O80JK7" completed keep alive response.
2023-10-07 16:34:19.246 +08:00 [DBG] 'SustainContext' disposed.
2023-10-07 16:34:19.246 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7195/api/School?pageNumber=2&pageSize=5 - - - 200 1247 text/json;+charset=utf-8 77.6050ms
2023-10-07 16:34:36.164 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7195/api/School?pageNumber=1&pageSize=5 - -
2023-10-07 16:34:36.164 +08:00 [DBG] 1 candidate(s) found for the request path '/api/School'
2023-10-07 16:34:36.164 +08:00 [DBG] Endpoint 'Sustain.Controllers.SchoolController.GetSchools (contactsapp)' with route pattern 'api/School' is valid for the request path '/api/School'
2023-10-07 16:34:36.165 +08:00 [DBG] Request matched endpoint 'Sustain.Controllers.SchoolController.GetSchools (contactsapp)'
2023-10-07 16:34:36.165 +08:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2023-10-07 16:34:36.165 +08:00 [INF] CORS policy execution successful.
2023-10-07 16:34:36.166 +08:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-07 16:34:36.166 +08:00 [INF] Executing endpoint 'Sustain.Controllers.SchoolController.GetSchools (contactsapp)'
2023-10-07 16:34:36.166 +08:00 [INF] Route matched with {action = "GetSchools", controller = "School"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Sustain.Models.SchoolDto]]] GetSchools(System.String, System.String, Int32, Int32) on controller Sustain.Controllers.SchoolController (contactsapp).
2023-10-07 16:34:36.167 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-07 16:34:36.167 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-07 16:34:36.167 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-07 16:34:36.167 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-07 16:34:36.167 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-07 16:34:36.167 +08:00 [DBG] Executing controller factory for controller Sustain.Controllers.SchoolController (contactsapp)
2023-10-07 16:34:36.170 +08:00 [DBG] Executed controller factory for controller Sustain.Controllers.SchoolController (contactsapp)
2023-10-07 16:34:36.171 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-10-07 16:34:36.171 +08:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2023-10-07 16:34:36.171 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2023-10-07 16:34:36.172 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-10-07 16:34:36.172 +08:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-10-07 16:34:36.172 +08:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-10-07 16:34:36.174 +08:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-10-07 16:34:36.174 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-10-07 16:34:36.174 +08:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-10-07 16:34:36.174 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-10-07 16:34:36.175 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-10-07 16:34:36.175 +08:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-10-07 16:34:36.175 +08:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-10-07 16:34:36.175 +08:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-10-07 16:34:36.175 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2023-10-07 16:34:36.175 +08:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name 'pageNumber' in request data ...
2023-10-07 16:34:36.175 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-10-07 16:34:36.175 +08:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-10-07 16:34:36.176 +08:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2023-10-07 16:34:36.176 +08:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2023-10-07 16:34:36.176 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2023-10-07 16:34:36.176 +08:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2023-10-07 16:34:36.176 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-10-07 16:34:36.176 +08:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-10-07 16:34:36.176 +08:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2023-10-07 16:34:36.177 +08:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2023-10-07 16:34:36.224 +08:00 [INF] Entity Framework Core 6.0.8 initialized 'SustainContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.8' with options: None
2023-10-07 16:34:36.225 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-07 16:34:36.225 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-07 16:34:36.225 +08:00 [DBG] Opening connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:34:36.225 +08:00 [DBG] Opened connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:34:36.225 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [School] AS [s]
2023-10-07 16:34:36.229 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [School] AS [s]
2023-10-07 16:34:36.229 +08:00 [DBG] A data reader was disposed.
2023-10-07 16:34:36.229 +08:00 [DBG] Closing connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:34:36.229 +08:00 [DBG] Closed connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:34:36.229 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-07 16:34:36.229 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-07 16:34:36.229 +08:00 [DBG] Opening connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:34:36.229 +08:00 [DBG] Opened connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:34:36.230 +08:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[SchoolId], [t].[SchoolLocation], [t].[SchoolName], [t].[SchoolTypeId], [s0].[SchoolTypeId], [m].[MeterId], [m].[MeterDescription], [m].[MeterName], [m].[MeterTypeId], [m].[SchoolId], [m].[UtilityAccountNumber], [s0].[TypeLongDescription], [s0].[TypeShortDescription]
FROM (
    SELECT [s].[SchoolId], [s].[SchoolLocation], [s].[SchoolName], [s].[SchoolTypeId]
    FROM [School] AS [s]
    ORDER BY [s].[SchoolName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [SchoolType] AS [s0] ON [t].[SchoolTypeId] = [s0].[SchoolTypeId]
LEFT JOIN [Meter] AS [m] ON [t].[SchoolId] = [m].[SchoolId]
ORDER BY [t].[SchoolName], [t].[SchoolId], [s0].[SchoolTypeId]
2023-10-07 16:34:36.232 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[SchoolId], [t].[SchoolLocation], [t].[SchoolName], [t].[SchoolTypeId], [s0].[SchoolTypeId], [m].[MeterId], [m].[MeterDescription], [m].[MeterName], [m].[MeterTypeId], [m].[SchoolId], [m].[UtilityAccountNumber], [s0].[TypeLongDescription], [s0].[TypeShortDescription]
FROM (
    SELECT [s].[SchoolId], [s].[SchoolLocation], [s].[SchoolName], [s].[SchoolTypeId]
    FROM [School] AS [s]
    ORDER BY [s].[SchoolName]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [SchoolType] AS [s0] ON [t].[SchoolTypeId] = [s0].[SchoolTypeId]
LEFT JOIN [Meter] AS [m] ON [t].[SchoolId] = [m].[SchoolId]
ORDER BY [t].[SchoolName], [t].[SchoolId], [s0].[SchoolTypeId]
2023-10-07 16:34:36.233 +08:00 [DBG] Context 'SustainContext' started tracking 'School' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 16:34:36.233 +08:00 [DBG] Context 'SustainContext' started tracking 'SchoolType' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 16:34:36.233 +08:00 [DBG] Context 'SustainContext' started tracking 'School' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 16:34:36.233 +08:00 [DBG] Context 'SustainContext' started tracking 'SchoolType' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 16:34:36.233 +08:00 [DBG] Context 'SustainContext' started tracking 'School' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 16:34:36.233 +08:00 [DBG] Context 'SustainContext' started tracking 'School' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 16:34:36.233 +08:00 [DBG] Context 'SustainContext' started tracking 'School' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 16:34:36.233 +08:00 [DBG] A data reader was disposed.
2023-10-07 16:34:36.233 +08:00 [DBG] Closing connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:34:36.233 +08:00 [DBG] Closed connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:34:36.234 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-07 16:34:36.234 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/json"]'.
2023-10-07 16:34:36.234 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'text/json' to write the response.
2023-10-07 16:34:36.234 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Sustain.Models.SchoolDto, contactsapp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-07 16:34:36.234 +08:00 [INF] Executed action Sustain.Controllers.SchoolController.GetSchools (contactsapp) in 66.8145ms
2023-10-07 16:34:36.234 +08:00 [INF] Executed endpoint 'Sustain.Controllers.SchoolController.GetSchools (contactsapp)'
2023-10-07 16:34:36.234 +08:00 [DBG] Connection id "0HMU720O80JK7" completed keep alive response.
2023-10-07 16:34:36.234 +08:00 [DBG] 'SustainContext' disposed.
2023-10-07 16:34:36.235 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7195/api/School?pageNumber=1&pageSize=5 - - - 200 1127 text/json;+charset=utf-8 70.5337ms
2023-10-07 16:36:46.523 +08:00 [DBG] Connection id "0HMU720O80JK7" disconnecting.
2023-10-07 16:36:46.525 +08:00 [DBG] Connection id "0HMU720O80JK7" stopped.
2023-10-07 16:36:46.525 +08:00 [DBG] Connection id "0HMU720O80JK7" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-10-07 16:46:24.861 +08:00 [INF] Application is shutting down...
2023-10-07 16:46:24.862 +08:00 [DBG] Hosting stopping
2023-10-07 16:46:24.869 +08:00 [DBG] Hosting stopped
2023-10-07 16:57:15.496 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-07 16:57:15.837 +08:00 [INF] Entity Framework Core 6.0.8 initialized 'SustainContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.8' with options: None
2023-10-07 16:57:15.900 +08:00 [DBG] DetectChanges starting for 'SustainContext'.
2023-10-07 16:57:15.901 +08:00 [DBG] DetectChanges completed for 'SustainContext'.
2023-10-07 16:57:15.901 +08:00 [DBG] DetectChanges starting for 'SustainContext'.
2023-10-07 16:57:15.901 +08:00 [DBG] DetectChanges completed for 'SustainContext'.
2023-10-07 16:57:15.906 +08:00 [DBG] DetectChanges starting for 'SustainContext'.
2023-10-07 16:57:15.906 +08:00 [DBG] DetectChanges completed for 'SustainContext'.
2023-10-07 16:57:15.906 +08:00 [DBG] DetectChanges starting for 'SustainContext'.
2023-10-07 16:57:15.906 +08:00 [DBG] DetectChanges completed for 'SustainContext'.
2023-10-07 16:57:15.948 +08:00 [DBG] 'SustainContext' disposed.
2023-10-07 16:59:43.760 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-07 16:59:44.110 +08:00 [INF] Entity Framework Core 6.0.8 initialized 'SustainContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.8' with options: None
2023-10-07 16:59:44.137 +08:00 [DBG] Migrating using database 'sustainable' on server 'localhost'.
2023-10-07 16:59:44.139 +08:00 [DBG] Opening connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:59:44.296 +08:00 [DBG] Opened connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:59:44.300 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-10-07 16:59:44.303 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (2ms).
2023-10-07 16:59:44.308 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-10-07 16:59:44.322 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-10-07 16:59:44.323 +08:00 [DBG] Closing connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:59:44.324 +08:00 [DBG] Closed connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:59:44.327 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2023-10-07 16:59:44.327 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-07 16:59:44.327 +08:00 [DBG] Opening connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:59:44.327 +08:00 [DBG] Opened connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:59:44.327 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-10-07 16:59:44.345 +08:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-10-07 16:59:44.345 +08:00 [DBG] Closing connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:59:44.345 +08:00 [DBG] Closed connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:59:44.346 +08:00 [DBG] Opening connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:59:44.346 +08:00 [DBG] Opened connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:59:44.346 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-10-07 16:59:44.346 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-07 16:59:44.346 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-10-07 16:59:44.352 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-10-07 16:59:44.353 +08:00 [DBG] Closing connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:59:44.353 +08:00 [DBG] Closed connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:59:44.353 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2023-10-07 16:59:44.353 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-07 16:59:44.353 +08:00 [DBG] Opening connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:59:44.353 +08:00 [DBG] Opened connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:59:44.353 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-10-07 16:59:44.357 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-10-07 16:59:44.357 +08:00 [DBG] Closing connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:59:44.357 +08:00 [DBG] Closed connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:59:44.366 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-07 16:59:44.366 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-07 16:59:44.366 +08:00 [DBG] Opening connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:59:44.366 +08:00 [DBG] Opened connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:59:44.367 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-10-07 16:59:44.376 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-10-07 16:59:44.377 +08:00 [DBG] A data reader was disposed.
2023-10-07 16:59:44.377 +08:00 [DBG] Closing connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:59:44.377 +08:00 [DBG] Closed connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:59:44.384 +08:00 [INF] Applying migration '20231007085715_metermig10'.
2023-10-07 16:59:44.407 +08:00 [DBG] Opening connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:59:44.408 +08:00 [DBG] Opened connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:59:44.408 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-10-07 16:59:44.413 +08:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-10-07 16:59:44.414 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-10-07 16:59:44.414 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-07 16:59:44.414 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[MeterType].[TypeShortDescription]', N'typeShortDescription', N'COLUMN';
2023-10-07 16:59:44.604 +08:00 [INF] Executed DbCommand (190ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[MeterType].[TypeShortDescription]', N'typeShortDescription', N'COLUMN';
2023-10-07 16:59:44.604 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-10-07 16:59:44.604 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-07 16:59:44.604 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[MeterType].[TypeLongDescription]', N'typeLongDescription', N'COLUMN';
2023-10-07 16:59:44.607 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[MeterType].[TypeLongDescription]', N'typeLongDescription', N'COLUMN';
2023-10-07 16:59:44.607 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-10-07 16:59:44.607 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-07 16:59:44.607 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[MeterType].[MeterTypeId]', N'Id', N'COLUMN';
2023-10-07 16:59:44.609 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[MeterType].[MeterTypeId]', N'Id', N'COLUMN';
2023-10-07 16:59:44.610 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-10-07 16:59:44.610 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-07 16:59:44.610 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[MeterType]') AND [c].[name] = N'typeShortDescription');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [MeterType] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [MeterType] ALTER COLUMN [typeShortDescription] nvarchar(50) NULL;
2023-10-07 16:59:44.627 +08:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[MeterType]') AND [c].[name] = N'typeShortDescription');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [MeterType] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [MeterType] ALTER COLUMN [typeShortDescription] nvarchar(50) NULL;
2023-10-07 16:59:44.627 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-10-07 16:59:44.627 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-07 16:59:44.627 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[MeterType]') AND [c].[name] = N'typeLongDescription');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [MeterType] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [MeterType] ALTER COLUMN [typeLongDescription] nvarchar(150) NULL;
2023-10-07 16:59:44.638 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[MeterType]') AND [c].[name] = N'typeLongDescription');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [MeterType] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [MeterType] ALTER COLUMN [typeLongDescription] nvarchar(150) NULL;
2023-10-07 16:59:44.639 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-10-07 16:59:44.639 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-07 16:59:44.639 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [MeterType] ADD [CreatedAt] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';
2023-10-07 16:59:44.643 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [MeterType] ADD [CreatedAt] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';
2023-10-07 16:59:44.644 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-10-07 16:59:44.644 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-07 16:59:44.644 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [MeterType] ADD [CreatedBy] nvarchar(50) NULL;
2023-10-07 16:59:44.645 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [MeterType] ADD [CreatedBy] nvarchar(50) NULL;
2023-10-07 16:59:44.645 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-10-07 16:59:44.645 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-07 16:59:44.645 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [MeterType] ADD [LastModifiedAt] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';
2023-10-07 16:59:44.648 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [MeterType] ADD [LastModifiedAt] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';
2023-10-07 16:59:44.648 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-10-07 16:59:44.648 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-07 16:59:44.648 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [MeterType] ADD [LastModifiedBy] nvarchar(50) NULL;
2023-10-07 16:59:44.650 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [MeterType] ADD [LastModifiedBy] nvarchar(50) NULL;
2023-10-07 16:59:44.650 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-10-07 16:59:44.651 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-07 16:59:44.651 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [MeterType] ADD [active] bit NOT NULL DEFAULT CAST(0 AS bit);
2023-10-07 16:59:44.654 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [MeterType] ADD [active] bit NOT NULL DEFAULT CAST(0 AS bit);
2023-10-07 16:59:44.654 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-10-07 16:59:44.654 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-07 16:59:44.654 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [MeterType] ADD [effFrom] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';
2023-10-07 16:59:44.657 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [MeterType] ADD [effFrom] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';
2023-10-07 16:59:44.657 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-10-07 16:59:44.657 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-07 16:59:44.657 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [MeterType] ADD [effTo] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';
2023-10-07 16:59:44.660 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [MeterType] ADD [effTo] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';
2023-10-07 16:59:44.660 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-10-07 16:59:44.660 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-07 16:59:44.660 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [MeterType] ADD [typeCode] nvarchar(max) NULL;
2023-10-07 16:59:44.662 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [MeterType] ADD [typeCode] nvarchar(max) NULL;
2023-10-07 16:59:44.663 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-10-07 16:59:44.663 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-07 16:59:44.663 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20231007085715_metermig10', N'6.0.8');
2023-10-07 16:59:44.665 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20231007085715_metermig10', N'6.0.8');
2023-10-07 16:59:44.666 +08:00 [DBG] Committing transaction.
2023-10-07 16:59:44.670 +08:00 [DBG] Committed transaction.
2023-10-07 16:59:44.670 +08:00 [DBG] Disposing transaction.
2023-10-07 16:59:44.671 +08:00 [DBG] Closing connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:59:44.671 +08:00 [DBG] Closed connection to database 'sustainable' on server 'localhost'.
2023-10-07 16:59:44.671 +08:00 [DBG] 'SustainContext' disposed.
2023-10-07 17:12:27.608 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-07 17:12:27.654 +08:00 [DBG] Hosting starting
2023-10-07 17:12:27.716 +08:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 94E46C593C0BE06B61505D939614C7B944816EDD)
2023-10-07 17:12:27.725 +08:00 [INF] Now listening on: https://localhost:7195
2023-10-07 17:12:27.725 +08:00 [INF] Now listening on: http://localhost:5108
2023-10-07 17:12:27.725 +08:00 [DBG] Loaded hosting startup assembly contactsapp
2023-10-07 17:12:27.725 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-07 17:12:27.725 +08:00 [INF] Hosting environment: Development
2023-10-07 17:12:27.725 +08:00 [INF] Content root path: /Users/philipwebb/Development/dotnetangular/contactsapp/
2023-10-07 17:12:27.725 +08:00 [DBG] Hosting started
2023-10-07 17:12:45.517 +08:00 [DBG] Connection id "0HMU72M8QKFCP" accepted.
2023-10-07 17:12:45.519 +08:00 [DBG] Connection id "0HMU72M8QKFCP" started.
2023-10-07 17:12:45.560 +08:00 [DBG] Connection 0HMU72M8QKFCP established using the following protocol: "Tls12"
2023-10-07 17:12:45.582 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7195/swagger/index.html - -
2023-10-07 17:12:45.583 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-10-07 17:12:45.596 +08:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-10-07 17:12:45.596 +08:00 [DBG] Request did not match any endpoints
2023-10-07 17:12:45.635 +08:00 [DBG] Connection id "0HMU72M8QKFCP" completed keep alive response.
2023-10-07 17:12:45.636 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7195/swagger/index.html - - - 200 - text/html;charset=utf-8 55.9749ms
2023-10-07 17:12:45.663 +08:00 [DBG] Connection id "0HMU72M8QKFCQ" accepted.
2023-10-07 17:12:45.664 +08:00 [DBG] Connection id "0HMU72M8QKFCQ" started.
2023-10-07 17:12:45.687 +08:00 [DBG] Connection 0HMU72M8QKFCQ established using the following protocol: "Tls12"
2023-10-07 17:12:45.688 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7195/swagger/swagger-ui-bundle.js - -
2023-10-07 17:12:45.688 +08:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2023-10-07 17:12:45.688 +08:00 [DBG] Request did not match any endpoints
2023-10-07 17:12:45.699 +08:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2023-10-07 17:12:45.699 +08:00 [DBG] Connection id "0HMU72M8QKFCQ" completed keep alive response.
2023-10-07 17:12:45.699 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7195/swagger/swagger-ui-bundle.js - - - 200 1092889 application/javascript 11.1553ms
2023-10-07 17:12:45.783 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7195/swagger/v1/swagger.json - -
2023-10-07 17:12:45.783 +08:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-07 17:12:45.783 +08:00 [DBG] Request did not match any endpoints
2023-10-07 17:12:45.848 +08:00 [DBG] Connection id "0HMU72M8QKFCP" completed keep alive response.
2023-10-07 17:12:45.848 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7195/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 65.5664ms
2023-10-07 17:13:15.770 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7195/api/Meters?schoolid=6 - -
2023-10-07 17:13:15.777 +08:00 [DBG] 1 candidate(s) found for the request path '/api/Meters'
2023-10-07 17:13:15.782 +08:00 [DBG] Endpoint 'Sustain.Controllers.MetersController.GetMetersForSchool (contactsapp)' with route pattern 'api/Meters' is valid for the request path '/api/Meters'
2023-10-07 17:13:15.783 +08:00 [DBG] Request matched endpoint 'Sustain.Controllers.MetersController.GetMetersForSchool (contactsapp)'
2023-10-07 17:13:15.783 +08:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-07 17:13:15.786 +08:00 [INF] Executing endpoint 'Sustain.Controllers.MetersController.GetMetersForSchool (contactsapp)'
2023-10-07 17:13:15.814 +08:00 [INF] Route matched with {action = "GetMetersForSchool", controller = "Meters"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Sustain.Models.MeterDto]]] GetMetersForSchool(Int32) on controller Sustain.Controllers.MetersController (contactsapp).
2023-10-07 17:13:15.815 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-07 17:13:15.815 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-07 17:13:15.815 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-07 17:13:15.815 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-07 17:13:15.815 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-07 17:13:15.815 +08:00 [DBG] Executing controller factory for controller Sustain.Controllers.MetersController (contactsapp)
2023-10-07 17:13:15.873 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-07 17:13:15.937 +08:00 [DBG] Executed controller factory for controller Sustain.Controllers.MetersController (contactsapp)
2023-10-07 17:13:15.939 +08:00 [DBG] Attempting to bind parameter 'schoolid' of type 'System.Int32' ...
2023-10-07 17:13:15.940 +08:00 [DBG] Attempting to bind parameter 'schoolid' of type 'System.Int32' using the name 'schoolid' in request data ...
2023-10-07 17:13:15.940 +08:00 [DBG] Done attempting to bind parameter 'schoolid' of type 'System.Int32'.
2023-10-07 17:13:15.940 +08:00 [DBG] Done attempting to bind parameter 'schoolid' of type 'System.Int32'.
2023-10-07 17:13:15.940 +08:00 [DBG] Attempting to validate the bound parameter 'schoolid' of type 'System.Int32' ...
2023-10-07 17:13:15.941 +08:00 [DBG] Done attempting to validate the bound parameter 'schoolid' of type 'System.Int32'.
2023-10-07 17:13:16.249 +08:00 [INF] Entity Framework Core 6.0.8 initialized 'SustainContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.8' with options: None
2023-10-07 17:13:16.278 +08:00 [DBG] Compiling query expression: 
'DbSet<Meter>()
    .Where(meter => meter.SchoolId == __schoolId_0)'
2023-10-07 17:13:16.365 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Meter>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Meter.MeterId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Meter.MeterDescription (string) MaxLength(255), 1], [Property: Meter.MeterName (string) MaxLength(255), 2], [Property: Meter.MeterTypeId (int?) FK Index, 3], [Property: Meter.SchoolId (int?) FK Index, 4], [Property: Meter.UtilityAccountNumber (string), 5] }
        SELECT m.MeterId, m.MeterDescription, m.MeterName, m.MeterTypeId, m.SchoolId, m.UtilityAccountNumber
        FROM Meter AS m
        WHERE m.SchoolId == @__schoolId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Meter>, 
    Sustain.DbContexts.SustainContext, 
    False, 
    False, 
    True
)'
2023-10-07 17:13:16.386 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-07 17:13:16.402 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (14ms).
2023-10-07 17:13:16.411 +08:00 [DBG] Opening connection to database 'sustainable' on server 'localhost'.
2023-10-07 17:13:16.519 +08:00 [DBG] Opened connection to database 'sustainable' on server 'localhost'.
2023-10-07 17:13:16.524 +08:00 [DBG] Executing DbCommand [Parameters=[@__schoolId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MeterId], [m].[MeterDescription], [m].[MeterName], [m].[MeterTypeId], [m].[SchoolId], [m].[UtilityAccountNumber]
FROM [Meter] AS [m]
WHERE [m].[SchoolId] = @__schoolId_0
2023-10-07 17:13:16.555 +08:00 [INF] Executed DbCommand (32ms) [Parameters=[@__schoolId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MeterId], [m].[MeterDescription], [m].[MeterName], [m].[MeterTypeId], [m].[SchoolId], [m].[UtilityAccountNumber]
FROM [Meter] AS [m]
WHERE [m].[SchoolId] = @__schoolId_0
2023-10-07 17:13:16.561 +08:00 [DBG] A data reader was disposed.
2023-10-07 17:13:16.563 +08:00 [DBG] Closing connection to database 'sustainable' on server 'localhost'.
2023-10-07 17:13:16.564 +08:00 [DBG] Closed connection to database 'sustainable' on server 'localhost'.
2023-10-07 17:13:16.574 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-07 17:13:16.575 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-07 17:13:16.575 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-07 17:13:16.575 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-07 17:13:16.575 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-07 17:13:16.575 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-07 17:13:16.575 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Sustain.Models.MeterDto, contactsapp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-07 17:13:16.615 +08:00 [INF] Executed action Sustain.Controllers.MetersController.GetMetersForSchool (contactsapp) in 796.3561ms
2023-10-07 17:13:16.615 +08:00 [INF] Executed endpoint 'Sustain.Controllers.MetersController.GetMetersForSchool (contactsapp)'
2023-10-07 17:13:16.616 +08:00 [DBG] Connection id "0HMU72M8QKFCP" completed keep alive response.
2023-10-07 17:13:16.617 +08:00 [DBG] 'SustainContext' disposed.
2023-10-07 17:13:16.617 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7195/api/Meters?schoolid=6 - - - 200 2 application/json;+charset=utf-8 847.6637ms
2023-10-07 17:13:28.981 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7195/api/Meters?schoolid=5 - -
2023-10-07 17:13:28.983 +08:00 [DBG] 1 candidate(s) found for the request path '/api/Meters'
2023-10-07 17:13:28.983 +08:00 [DBG] Endpoint 'Sustain.Controllers.MetersController.GetMetersForSchool (contactsapp)' with route pattern 'api/Meters' is valid for the request path '/api/Meters'
2023-10-07 17:13:28.983 +08:00 [DBG] Request matched endpoint 'Sustain.Controllers.MetersController.GetMetersForSchool (contactsapp)'
2023-10-07 17:13:28.983 +08:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-07 17:13:28.984 +08:00 [INF] Executing endpoint 'Sustain.Controllers.MetersController.GetMetersForSchool (contactsapp)'
2023-10-07 17:13:28.984 +08:00 [INF] Route matched with {action = "GetMetersForSchool", controller = "Meters"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Sustain.Models.MeterDto]]] GetMetersForSchool(Int32) on controller Sustain.Controllers.MetersController (contactsapp).
2023-10-07 17:13:28.984 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-07 17:13:28.984 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-07 17:13:28.984 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-07 17:13:28.984 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-07 17:13:28.985 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-07 17:13:28.985 +08:00 [DBG] Executing controller factory for controller Sustain.Controllers.MetersController (contactsapp)
2023-10-07 17:13:28.986 +08:00 [DBG] Executed controller factory for controller Sustain.Controllers.MetersController (contactsapp)
2023-10-07 17:13:28.988 +08:00 [DBG] Attempting to bind parameter 'schoolid' of type 'System.Int32' ...
2023-10-07 17:13:28.989 +08:00 [DBG] Attempting to bind parameter 'schoolid' of type 'System.Int32' using the name 'schoolid' in request data ...
2023-10-07 17:13:28.989 +08:00 [DBG] Done attempting to bind parameter 'schoolid' of type 'System.Int32'.
2023-10-07 17:13:28.990 +08:00 [DBG] Done attempting to bind parameter 'schoolid' of type 'System.Int32'.
2023-10-07 17:13:28.990 +08:00 [DBG] Attempting to validate the bound parameter 'schoolid' of type 'System.Int32' ...
2023-10-07 17:13:28.990 +08:00 [DBG] Done attempting to validate the bound parameter 'schoolid' of type 'System.Int32'.
2023-10-07 17:13:28.992 +08:00 [INF] Entity Framework Core 6.0.8 initialized 'SustainContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.8' with options: None
2023-10-07 17:13:28.998 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-07 17:13:28.998 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-07 17:13:28.998 +08:00 [DBG] Opening connection to database 'sustainable' on server 'localhost'.
2023-10-07 17:13:29.000 +08:00 [DBG] Opened connection to database 'sustainable' on server 'localhost'.
2023-10-07 17:13:29.001 +08:00 [DBG] Executing DbCommand [Parameters=[@__schoolId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MeterId], [m].[MeterDescription], [m].[MeterName], [m].[MeterTypeId], [m].[SchoolId], [m].[UtilityAccountNumber]
FROM [Meter] AS [m]
WHERE [m].[SchoolId] = @__schoolId_0
2023-10-07 17:13:29.010 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[@__schoolId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MeterId], [m].[MeterDescription], [m].[MeterName], [m].[MeterTypeId], [m].[SchoolId], [m].[UtilityAccountNumber]
FROM [Meter] AS [m]
WHERE [m].[SchoolId] = @__schoolId_0
2023-10-07 17:13:29.036 +08:00 [DBG] Context 'SustainContext' started tracking 'Meter' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 17:13:29.059 +08:00 [DBG] A data reader was disposed.
2023-10-07 17:13:29.059 +08:00 [DBG] Closing connection to database 'sustainable' on server 'localhost'.
2023-10-07 17:13:29.059 +08:00 [DBG] Closed connection to database 'sustainable' on server 'localhost'.
2023-10-07 17:13:29.060 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-07 17:13:29.060 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-07 17:13:29.060 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-07 17:13:29.060 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-07 17:13:29.060 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-07 17:13:29.060 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-07 17:13:29.060 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Sustain.Models.MeterDto, contactsapp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-07 17:13:29.072 +08:00 [INF] Executed action Sustain.Controllers.MetersController.GetMetersForSchool (contactsapp) in 87.4515ms
2023-10-07 17:13:29.072 +08:00 [INF] Executed endpoint 'Sustain.Controllers.MetersController.GetMetersForSchool (contactsapp)'
2023-10-07 17:13:29.073 +08:00 [DBG] Connection id "0HMU72M8QKFCP" completed keep alive response.
2023-10-07 17:13:29.073 +08:00 [DBG] 'SustainContext' disposed.
2023-10-07 17:13:29.073 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7195/api/Meters?schoolid=5 - - - 200 178 application/json;+charset=utf-8 91.5545ms
2023-10-07 17:14:56.820 +08:00 [DBG] Connection id "0HMU72M8QKFCQ" disconnecting.
2023-10-07 17:14:56.824 +08:00 [DBG] Connection id "0HMU72M8QKFCQ" stopped.
2023-10-07 17:14:56.825 +08:00 [DBG] Connection id "0HMU72M8QKFCQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-10-07 17:15:39.865 +08:00 [DBG] Connection id "0HMU72M8QKFCP" disconnecting.
2023-10-07 17:15:39.866 +08:00 [DBG] Connection id "0HMU72M8QKFCP" stopped.
2023-10-07 17:15:39.866 +08:00 [DBG] Connection id "0HMU72M8QKFCP" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-10-07 17:16:01.327 +08:00 [INF] Application is shutting down...
2023-10-07 17:16:01.327 +08:00 [DBG] Hosting stopping
2023-10-07 17:16:01.331 +08:00 [DBG] Hosting stopped
2023-10-07 17:17:00.133 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-07 17:17:00.184 +08:00 [DBG] Hosting starting
2023-10-07 17:17:00.252 +08:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 94E46C593C0BE06B61505D939614C7B944816EDD)
2023-10-07 17:17:00.260 +08:00 [INF] Now listening on: https://localhost:7195
2023-10-07 17:17:00.260 +08:00 [INF] Now listening on: http://localhost:5108
2023-10-07 17:17:00.260 +08:00 [DBG] Loaded hosting startup assembly contactsapp
2023-10-07 17:17:00.260 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-07 17:17:00.260 +08:00 [INF] Hosting environment: Development
2023-10-07 17:17:00.260 +08:00 [INF] Content root path: /Users/philipwebb/Development/dotnetangular/contactsapp/
2023-10-07 17:17:00.260 +08:00 [DBG] Hosting started
2023-10-07 17:17:04.096 +08:00 [DBG] Connection id "0HMU72OLSKA6V" accepted.
2023-10-07 17:17:04.096 +08:00 [DBG] Connection id "0HMU72OLSKA6V" started.
2023-10-07 17:17:04.142 +08:00 [DBG] Connection 0HMU72OLSKA6V established using the following protocol: "Tls12"
2023-10-07 17:17:04.164 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7195/swagger/index.html - -
2023-10-07 17:17:04.166 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-10-07 17:17:04.175 +08:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-10-07 17:17:04.175 +08:00 [DBG] Request did not match any endpoints
2023-10-07 17:17:04.212 +08:00 [DBG] Connection id "0HMU72OLSKA6V" completed keep alive response.
2023-10-07 17:17:04.213 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7195/swagger/index.html - - - 200 - text/html;charset=utf-8 50.1983ms
2023-10-07 17:17:04.295 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7195/swagger/v1/swagger.json - -
2023-10-07 17:17:04.295 +08:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-07 17:17:04.295 +08:00 [DBG] Request did not match any endpoints
2023-10-07 17:17:04.346 +08:00 [DBG] Connection id "0HMU72OLSKA6V" completed keep alive response.
2023-10-07 17:17:04.347 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7195/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 54.1970ms
2023-10-07 17:17:14.653 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7195/api/Meters?schoolid=5 - -
2023-10-07 17:17:14.661 +08:00 [DBG] 1 candidate(s) found for the request path '/api/Meters'
2023-10-07 17:17:14.665 +08:00 [DBG] Endpoint 'Sustain.Controllers.MetersController.GetMetersForSchool (contactsapp)' with route pattern 'api/Meters' is valid for the request path '/api/Meters'
2023-10-07 17:17:14.666 +08:00 [DBG] Request matched endpoint 'Sustain.Controllers.MetersController.GetMetersForSchool (contactsapp)'
2023-10-07 17:17:14.669 +08:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-07 17:17:14.670 +08:00 [INF] Executing endpoint 'Sustain.Controllers.MetersController.GetMetersForSchool (contactsapp)'
2023-10-07 17:17:14.695 +08:00 [INF] Route matched with {action = "GetMetersForSchool", controller = "Meters"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Sustain.Models.MeterDto]]] GetMetersForSchool(Int32) on controller Sustain.Controllers.MetersController (contactsapp).
2023-10-07 17:17:14.695 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-07 17:17:14.696 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-07 17:17:14.696 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-07 17:17:14.696 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-07 17:17:14.696 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-07 17:17:14.696 +08:00 [DBG] Executing controller factory for controller Sustain.Controllers.MetersController (contactsapp)
2023-10-07 17:17:14.761 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-07 17:17:14.824 +08:00 [DBG] Executed controller factory for controller Sustain.Controllers.MetersController (contactsapp)
2023-10-07 17:17:14.826 +08:00 [DBG] Attempting to bind parameter 'schoolid' of type 'System.Int32' ...
2023-10-07 17:17:14.827 +08:00 [DBG] Attempting to bind parameter 'schoolid' of type 'System.Int32' using the name 'schoolid' in request data ...
2023-10-07 17:17:14.827 +08:00 [DBG] Done attempting to bind parameter 'schoolid' of type 'System.Int32'.
2023-10-07 17:17:14.827 +08:00 [DBG] Done attempting to bind parameter 'schoolid' of type 'System.Int32'.
2023-10-07 17:17:14.827 +08:00 [DBG] Attempting to validate the bound parameter 'schoolid' of type 'System.Int32' ...
2023-10-07 17:17:14.827 +08:00 [DBG] Done attempting to validate the bound parameter 'schoolid' of type 'System.Int32'.
2023-10-07 17:17:15.132 +08:00 [INF] Entity Framework Core 6.0.8 initialized 'SustainContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.8' with options: None
2023-10-07 17:17:15.162 +08:00 [DBG] Compiling query expression: 
'DbSet<Meter>()
    .Include(m => m.MeterType)
    .Where(meter => meter.SchoolId == __schoolId_0)'
2023-10-07 17:17:15.197 +08:00 [DBG] Including navigation: 'Meter.MeterType'.
2023-10-07 17:17:15.266 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Meter>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Meter.MeterId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Meter.MeterDescription (string) MaxLength(255), 1], [Property: Meter.MeterName (string) MaxLength(255), 2], [Property: Meter.MeterTypeId (int?) FK Index, 3], [Property: Meter.SchoolId (int?) FK Index, 4], [Property: Meter.UtilityAccountNumber (string), 5] }
            1 -> Dictionary<IProperty, int> { [Property: MeterType.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: MeterType.CreatedAt (DateTime) Required, 7], [Property: MeterType.CreatedBy (string) MaxLength(50), 8], [Property: MeterType.LastModifiedAt (DateTime) Required, 9], [Property: MeterType.LastModifiedBy (string) MaxLength(50), 10], [Property: MeterType.TypeUnitOfMeasure (string) MaxLength(150), 11], [Property: MeterType.active (bool) Required, 12], [Property: MeterType.effFrom (DateTime) Required, 13], [Property: MeterType.effTo (DateTime) Required, 14], [Property: MeterType.typeCode (string), 15], [Property: MeterType.typeLongDescription (string) MaxLength(150), 16], [Property: MeterType.typeShortDescription (string) MaxLength(50), 17] }
        SELECT m.MeterId, m.MeterDescription, m.MeterName, m.MeterTypeId, m.SchoolId, m.UtilityAccountNumber, m0.Id, m0.CreatedAt, m0.CreatedBy, m0.LastModifiedAt, m0.LastModifiedBy, m0.TypeUnitOfMeasure, m0.active, m0.effFrom, m0.effTo, m0.typeCode, m0.typeLongDescription, m0.typeShortDescription
        FROM Meter AS m
        LEFT JOIN MeterType AS m0 ON m.MeterTypeId == m0.Id
        WHERE m.SchoolId == @__schoolId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Meter>, 
    Sustain.DbContexts.SustainContext, 
    False, 
    False, 
    True
)'
2023-10-07 17:17:15.287 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-07 17:17:15.301 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (12ms).
2023-10-07 17:17:15.308 +08:00 [DBG] Opening connection to database 'sustainable' on server 'localhost'.
2023-10-07 17:17:15.426 +08:00 [DBG] Opened connection to database 'sustainable' on server 'localhost'.
2023-10-07 17:17:15.431 +08:00 [DBG] Executing DbCommand [Parameters=[@__schoolId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MeterId], [m].[MeterDescription], [m].[MeterName], [m].[MeterTypeId], [m].[SchoolId], [m].[UtilityAccountNumber], [m0].[Id], [m0].[CreatedAt], [m0].[CreatedBy], [m0].[LastModifiedAt], [m0].[LastModifiedBy], [m0].[TypeUnitOfMeasure], [m0].[active], [m0].[effFrom], [m0].[effTo], [m0].[typeCode], [m0].[typeLongDescription], [m0].[typeShortDescription]
FROM [Meter] AS [m]
LEFT JOIN [MeterType] AS [m0] ON [m].[MeterTypeId] = [m0].[Id]
WHERE [m].[SchoolId] = @__schoolId_0
2023-10-07 17:17:15.488 +08:00 [INF] Executed DbCommand (58ms) [Parameters=[@__schoolId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MeterId], [m].[MeterDescription], [m].[MeterName], [m].[MeterTypeId], [m].[SchoolId], [m].[UtilityAccountNumber], [m0].[Id], [m0].[CreatedAt], [m0].[CreatedBy], [m0].[LastModifiedAt], [m0].[LastModifiedBy], [m0].[TypeUnitOfMeasure], [m0].[active], [m0].[effFrom], [m0].[effTo], [m0].[typeCode], [m0].[typeLongDescription], [m0].[typeShortDescription]
FROM [Meter] AS [m]
LEFT JOIN [MeterType] AS [m0] ON [m].[MeterTypeId] = [m0].[Id]
WHERE [m].[SchoolId] = @__schoolId_0
2023-10-07 17:17:15.504 +08:00 [DBG] Context 'SustainContext' started tracking 'Meter' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 17:17:15.518 +08:00 [DBG] Context 'SustainContext' started tracking 'MeterType' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 17:17:15.531 +08:00 [DBG] A data reader was disposed.
2023-10-07 17:17:15.533 +08:00 [DBG] Closing connection to database 'sustainable' on server 'localhost'.
2023-10-07 17:17:15.534 +08:00 [DBG] Closed connection to database 'sustainable' on server 'localhost'.
2023-10-07 17:17:15.543 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-07 17:17:15.544 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-07 17:17:15.544 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-07 17:17:15.544 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-07 17:17:15.544 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-07 17:17:15.544 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-07 17:17:15.544 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Sustain.Models.MeterDto, contactsapp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-07 17:17:15.592 +08:00 [INF] Executed action Sustain.Controllers.MetersController.GetMetersForSchool (contactsapp) in 894.0899ms
2023-10-07 17:17:15.593 +08:00 [INF] Executed endpoint 'Sustain.Controllers.MetersController.GetMetersForSchool (contactsapp)'
2023-10-07 17:17:15.593 +08:00 [DBG] Connection id "0HMU72OLSKA6V" completed keep alive response.
2023-10-07 17:17:15.594 +08:00 [DBG] 'SustainContext' disposed.
2023-10-07 17:17:15.595 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7195/api/Meters?schoolid=5 - - - 200 178 application/json;+charset=utf-8 942.0102ms
2023-10-07 17:19:26.358 +08:00 [DBG] Connection id "0HMU72OLSKA6V" disconnecting.
2023-10-07 17:19:26.364 +08:00 [DBG] Connection id "0HMU72OLSKA6V" stopped.
2023-10-07 17:19:26.365 +08:00 [DBG] Connection id "0HMU72OLSKA6V" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-10-07 17:20:17.529 +08:00 [INF] Application is shutting down...
2023-10-07 17:20:17.531 +08:00 [DBG] Hosting stopping
2023-10-07 17:20:17.537 +08:00 [DBG] Hosting stopped
2023-10-07 17:20:21.181 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-07 17:20:21.229 +08:00 [DBG] Hosting starting
2023-10-07 17:20:21.291 +08:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 94E46C593C0BE06B61505D939614C7B944816EDD)
2023-10-07 17:20:21.300 +08:00 [INF] Now listening on: https://localhost:7195
2023-10-07 17:20:21.300 +08:00 [INF] Now listening on: http://localhost:5108
2023-10-07 17:20:21.300 +08:00 [DBG] Loaded hosting startup assembly contactsapp
2023-10-07 17:20:21.300 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-07 17:20:21.300 +08:00 [INF] Hosting environment: Development
2023-10-07 17:20:21.300 +08:00 [INF] Content root path: /Users/philipwebb/Development/dotnetangular/contactsapp/
2023-10-07 17:20:21.300 +08:00 [DBG] Hosting started
2023-10-07 17:20:34.110 +08:00 [INF] Application is shutting down...
2023-10-07 17:20:34.112 +08:00 [DBG] Hosting stopping
2023-10-07 17:20:34.127 +08:00 [DBG] Hosting stopped
2023-10-07 17:20:37.360 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-07 17:20:37.405 +08:00 [DBG] Hosting starting
2023-10-07 17:20:37.468 +08:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 94E46C593C0BE06B61505D939614C7B944816EDD)
2023-10-07 17:20:37.477 +08:00 [INF] Now listening on: https://localhost:7195
2023-10-07 17:20:37.477 +08:00 [INF] Now listening on: http://localhost:5108
2023-10-07 17:20:37.477 +08:00 [DBG] Loaded hosting startup assembly contactsapp
2023-10-07 17:20:37.478 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-07 17:20:37.478 +08:00 [INF] Hosting environment: Development
2023-10-07 17:20:37.478 +08:00 [INF] Content root path: /Users/philipwebb/Development/dotnetangular/contactsapp/
2023-10-07 17:20:37.478 +08:00 [DBG] Hosting started
2023-10-07 17:20:43.246 +08:00 [DBG] Connection id "0HMU72QN6JBET" accepted.
2023-10-07 17:20:43.246 +08:00 [DBG] Connection id "0HMU72QN6JBET" started.
2023-10-07 17:20:43.304 +08:00 [DBG] Connection 0HMU72QN6JBET established using the following protocol: "Tls12"
2023-10-07 17:20:43.330 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7195/swagger/index.html - -
2023-10-07 17:20:43.333 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-10-07 17:20:43.347 +08:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-10-07 17:20:43.347 +08:00 [DBG] Request did not match any endpoints
2023-10-07 17:20:43.397 +08:00 [DBG] Connection id "0HMU72QN6JBET" completed keep alive response.
2023-10-07 17:20:43.397 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7195/swagger/index.html - - - 200 - text/html;charset=utf-8 69.7041ms
2023-10-07 17:20:43.492 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7195/swagger/v1/swagger.json - -
2023-10-07 17:20:43.493 +08:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-07 17:20:43.493 +08:00 [DBG] Request did not match any endpoints
2023-10-07 17:20:43.553 +08:00 [DBG] Connection id "0HMU72QN6JBET" completed keep alive response.
2023-10-07 17:20:43.553 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7195/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 61.0155ms
2023-10-07 17:20:51.996 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7195/api/Meters?schoolid=5 - -
2023-10-07 17:20:52.002 +08:00 [DBG] 1 candidate(s) found for the request path '/api/Meters'
2023-10-07 17:20:52.007 +08:00 [DBG] Endpoint 'Sustain.Controllers.MetersController.GetMetersForSchool (contactsapp)' with route pattern 'api/Meters' is valid for the request path '/api/Meters'
2023-10-07 17:20:52.008 +08:00 [DBG] Request matched endpoint 'Sustain.Controllers.MetersController.GetMetersForSchool (contactsapp)'
2023-10-07 17:20:52.011 +08:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-07 17:20:52.014 +08:00 [INF] Executing endpoint 'Sustain.Controllers.MetersController.GetMetersForSchool (contactsapp)'
2023-10-07 17:20:52.042 +08:00 [INF] Route matched with {action = "GetMetersForSchool", controller = "Meters"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Sustain.Models.MeterDto]]] GetMetersForSchool(Int32) on controller Sustain.Controllers.MetersController (contactsapp).
2023-10-07 17:20:52.043 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-07 17:20:52.043 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-07 17:20:52.043 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-07 17:20:52.044 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-07 17:20:52.044 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-07 17:20:52.044 +08:00 [DBG] Executing controller factory for controller Sustain.Controllers.MetersController (contactsapp)
2023-10-07 17:20:52.104 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-07 17:20:52.166 +08:00 [DBG] Executed controller factory for controller Sustain.Controllers.MetersController (contactsapp)
2023-10-07 17:20:52.168 +08:00 [DBG] Attempting to bind parameter 'schoolid' of type 'System.Int32' ...
2023-10-07 17:20:52.169 +08:00 [DBG] Attempting to bind parameter 'schoolid' of type 'System.Int32' using the name 'schoolid' in request data ...
2023-10-07 17:20:52.169 +08:00 [DBG] Done attempting to bind parameter 'schoolid' of type 'System.Int32'.
2023-10-07 17:20:52.169 +08:00 [DBG] Done attempting to bind parameter 'schoolid' of type 'System.Int32'.
2023-10-07 17:20:52.169 +08:00 [DBG] Attempting to validate the bound parameter 'schoolid' of type 'System.Int32' ...
2023-10-07 17:20:52.170 +08:00 [DBG] Done attempting to validate the bound parameter 'schoolid' of type 'System.Int32'.
2023-10-07 17:20:52.476 +08:00 [INF] Entity Framework Core 6.0.8 initialized 'SustainContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.8' with options: None
2023-10-07 17:20:52.507 +08:00 [DBG] Compiling query expression: 
'DbSet<Meter>()
    .Include(m => m.MeterType)
    .Where(meter => meter.SchoolId == __schoolId_0)'
2023-10-07 17:20:52.542 +08:00 [DBG] Including navigation: 'Meter.MeterType'.
2023-10-07 17:20:52.612 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Meter>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Meter.MeterId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Meter.MeterDescription (string) MaxLength(255), 1], [Property: Meter.MeterName (string) MaxLength(255), 2], [Property: Meter.MeterTypeId (int?) FK Index, 3], [Property: Meter.SchoolId (int?) FK Index, 4], [Property: Meter.UtilityAccountNumber (string), 5] }
            1 -> Dictionary<IProperty, int> { [Property: MeterType.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: MeterType.CreatedAt (DateTime) Required, 7], [Property: MeterType.CreatedBy (string) MaxLength(50), 8], [Property: MeterType.LastModifiedAt (DateTime) Required, 9], [Property: MeterType.LastModifiedBy (string) MaxLength(50), 10], [Property: MeterType.TypeUnitOfMeasure (string) MaxLength(150), 11], [Property: MeterType.active (bool) Required, 12], [Property: MeterType.effFrom (DateTime) Required, 13], [Property: MeterType.effTo (DateTime) Required, 14], [Property: MeterType.typeCode (string), 15], [Property: MeterType.typeLongDescription (string) MaxLength(150), 16], [Property: MeterType.typeShortDescription (string) MaxLength(50), 17] }
        SELECT m.MeterId, m.MeterDescription, m.MeterName, m.MeterTypeId, m.SchoolId, m.UtilityAccountNumber, m0.Id, m0.CreatedAt, m0.CreatedBy, m0.LastModifiedAt, m0.LastModifiedBy, m0.TypeUnitOfMeasure, m0.active, m0.effFrom, m0.effTo, m0.typeCode, m0.typeLongDescription, m0.typeShortDescription
        FROM Meter AS m
        LEFT JOIN MeterType AS m0 ON m.MeterTypeId == m0.Id
        WHERE m.SchoolId == @__schoolId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Meter>, 
    Sustain.DbContexts.SustainContext, 
    False, 
    False, 
    True
)'
2023-10-07 17:20:52.634 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-07 17:20:52.649 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (13ms).
2023-10-07 17:20:52.660 +08:00 [DBG] Opening connection to database 'sustainable' on server 'localhost'.
2023-10-07 17:20:52.775 +08:00 [DBG] Opened connection to database 'sustainable' on server 'localhost'.
2023-10-07 17:20:52.780 +08:00 [DBG] Executing DbCommand [Parameters=[@__schoolId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MeterId], [m].[MeterDescription], [m].[MeterName], [m].[MeterTypeId], [m].[SchoolId], [m].[UtilityAccountNumber], [m0].[Id], [m0].[CreatedAt], [m0].[CreatedBy], [m0].[LastModifiedAt], [m0].[LastModifiedBy], [m0].[TypeUnitOfMeasure], [m0].[active], [m0].[effFrom], [m0].[effTo], [m0].[typeCode], [m0].[typeLongDescription], [m0].[typeShortDescription]
FROM [Meter] AS [m]
LEFT JOIN [MeterType] AS [m0] ON [m].[MeterTypeId] = [m0].[Id]
WHERE [m].[SchoolId] = @__schoolId_0
2023-10-07 17:20:52.808 +08:00 [INF] Executed DbCommand (29ms) [Parameters=[@__schoolId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MeterId], [m].[MeterDescription], [m].[MeterName], [m].[MeterTypeId], [m].[SchoolId], [m].[UtilityAccountNumber], [m0].[Id], [m0].[CreatedAt], [m0].[CreatedBy], [m0].[LastModifiedAt], [m0].[LastModifiedBy], [m0].[TypeUnitOfMeasure], [m0].[active], [m0].[effFrom], [m0].[effTo], [m0].[typeCode], [m0].[typeLongDescription], [m0].[typeShortDescription]
FROM [Meter] AS [m]
LEFT JOIN [MeterType] AS [m0] ON [m].[MeterTypeId] = [m0].[Id]
WHERE [m].[SchoolId] = @__schoolId_0
2023-10-07 17:20:52.824 +08:00 [DBG] Context 'SustainContext' started tracking 'Meter' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 17:20:52.838 +08:00 [DBG] Context 'SustainContext' started tracking 'MeterType' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-07 17:20:52.851 +08:00 [DBG] A data reader was disposed.
2023-10-07 17:20:52.853 +08:00 [DBG] Closing connection to database 'sustainable' on server 'localhost'.
2023-10-07 17:20:52.854 +08:00 [DBG] Closed connection to database 'sustainable' on server 'localhost'.
2023-10-07 17:20:52.864 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-07 17:20:52.864 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-07 17:20:52.865 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-07 17:20:52.865 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-07 17:20:52.865 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-07 17:20:52.865 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-07 17:20:52.865 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Sustain.Models.MeterDto, contactsapp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-07 17:20:52.913 +08:00 [INF] Executed action Sustain.Controllers.MetersController.GetMetersForSchool (contactsapp) in 867.545ms
2023-10-07 17:20:52.914 +08:00 [INF] Executed endpoint 'Sustain.Controllers.MetersController.GetMetersForSchool (contactsapp)'
2023-10-07 17:20:52.914 +08:00 [DBG] Connection id "0HMU72QN6JBET" completed keep alive response.
2023-10-07 17:20:52.915 +08:00 [DBG] 'SustainContext' disposed.
2023-10-07 17:20:52.915 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7195/api/Meters?schoolid=5 - - - 200 500 application/json;+charset=utf-8 919.8760ms
2023-10-07 17:23:03.573 +08:00 [DBG] Connection id "0HMU72QN6JBET" disconnecting.
2023-10-07 17:23:03.578 +08:00 [DBG] Connection id "0HMU72QN6JBET" stopped.
2023-10-07 17:23:03.579 +08:00 [DBG] Connection id "0HMU72QN6JBET" sending FIN because: "The Socket transport's send loop completed gracefully."
